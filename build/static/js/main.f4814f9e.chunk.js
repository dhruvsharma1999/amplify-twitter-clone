(this.webpackJsonpboyaki=this.webpackJsonpboyaki||[]).push([[0],{210:function(t,e,n){},211:function(t,e,n){},282:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),r=n(20),o=n.n(r),s=(n(210),n(211),n(175)),c=n(174),l=n(19),u=n(176),d=n(321),p=n(338),j=n(339),b=n(49),h=n.n(b),m=n(60),f=n(24),O=n(28),x=n(53),g=n(341),y="\n  query ListPostsSortedByTimestamp(\n    $type: String\n    $timestamp: ModelIntKeyConditionInput\n    $sortDirection: ModelSortDirection\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listPostsSortedByTimestamp(\n      type: $type\n      timestamp: $timestamp\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        type\n        id\n        content\n        owner\n        timestamp\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",w="\n  query ListPostsBySpecificOwner(\n    $owner: String\n    $timestamp: ModelIntKeyConditionInput\n    $sortDirection: ModelSortDirection\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listPostsBySpecificOwner(\n      owner: $owner\n      timestamp: $timestamp\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        type\n        id\n        content\n        owner\n        timestamp\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",v="\n  subscription OnCreatePost {\n    onCreatePost {\n      type\n      id\n      content\n      owner\n      timestamp\n      createdAt\n      updatedAt\n    }\n  }\n",k=n(324),I=n(326),T=n(327),S=n(108),C=n(328),P=n(329),_=n(330),A=n(331),$=n(344),B=n(118),D=n.n(B),L=n(8),N=Object(d.a)((function(t){return{listRoot:{width:"100%",wordBreak:"break-all",overflow:"scroll",borderRight:"1px solid #37444C"},alignCenter:{textAlign:"center"},loader:{textAlign:"center",paddingTop:20},maxWidth:{width:"100%"},listHeader:{position:"sticky",top:0,zIndex:1200,backgroundColor:"#15202B",borderBottom:"1px solid #37444C"},clickable:{cursor:"pointer"}}}));function R(t){var e=t.isLoading,n=t.posts,a=t.getAdditionalPosts,i=t.listHeaderTitle,r=t.listHeaderTitleButton,o=N();return Object(L.jsx)("div",{className:o.listRoot,children:e?Object(L.jsx)("div",{className:o.loader,children:Object(L.jsx)(k.a,{size:25})}):Object(L.jsxs)(I.a,{disablePadding:!0,children:[Object(L.jsx)(T.a,{alignItems:"flex-start",className:o.listHeader,children:Object(L.jsxs)(S.a,{variant:"h5",fontWeight:"fontWeightBold",maxWidth:!0,children:[i,r&&r]})}),n.map((function(t){return Object(L.jsxs)("span",{children:[Object(L.jsx)(M,{post:t}),Object(L.jsx)(C.a,{component:"li"})]})})),Object(L.jsx)(T.a,{alignItems:"flex-start",className:o.alignCenter,children:Object(L.jsx)(P.a,{primary:Object(L.jsxs)(_.a,{variant:"outlined",onClick:function(){return a()},className:o.maxWidth,children:[" ","Read More"," "]})})},"loadmore")]})})}function M(t){var e=t.post,n=N(),a=Object(l.g)(),r=D()();console.log(r);return Object(L.jsxs)(T.a,{alignItems:"flex-start",children:[Object(L.jsx)(A.a,{children:Object(L.jsx)("div",{className:n.clickable,onClick:function(){return a.push("/"+e.owner)},children:Object(L.jsx)($.a,{alt:e.owner,src:"/"})})}),Object(L.jsx)(P.a,{primary:Object(L.jsxs)(i.a.Fragment,{children:[e.owner,Object(L.jsx)(S.a,{color:"textSecondary",display:"inline",children:" "+String.fromCharCode(183)+" "+function(t){for(var e=["years","months","weeks","days","hours","minutes","seconds"],n=0;n<e.length;n++){var a=e[n],i=D()(r).diff(1e3*t,a);if(i>0)return i+a.charAt(0)}return 0+e[e.length-1].charAt(0)}(e.timestamp)})]}),secondary:Object(L.jsx)(S.a,{color:"textPrimary",children:e.content})})]},e.id)}var E=n(343),F=n(335),q=n(340),U=n(336),W=n(337),H=n(18),G=Object(d.a)((function(t){return{drawer:{width:340,flexShrink:0,position:"relative"},drawerPaper:{width:340,position:"relative"},toolbar:t.mixins.toolbar,textField:{width:340},list:{width:300}}}));function Q(t){var e=t.activeListItem,n=G(),a=Object(l.g)(),r=i.a.useState(""),o=Object(f.a)(r,2),s=o[0],c=o[1],u=i.a.useState(!1),d=Object(f.a)(u,2),p=d[0],j=d[1],b=i.a.useState(""),O=Object(f.a)(b,2),y=O[0],w=O[1],v=function(){var t=Object(m.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.graphql(Object(g.b)("\n  mutation CreatePost(\n    $input: CreatePostInput!\n    $condition: ModelPostConditionInput\n  ) {\n    createPost(input: $input, condition: $condition) {\n      type\n      id\n      content\n      owner\n      timestamp\n      createdAt\n      updatedAt\n    }\n  }\n",{input:{type:"post",content:s,timestamp:Math.floor(Date.now()/1e3)}}));case 2:e=t.sent,console.log(e),c("");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsxs)(E.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},anchor:"left",children:[Object(L.jsx)("div",{className:n.toolbar}),Object(L.jsxs)(I.a,{children:[Object(L.jsxs)(T.a,{button:!0,selected:"global-timeline"===e,onClick:function(){H.a.currentAuthenticatedUser().then((function(t){a.push("/global-timeline")}))},children:[Object(L.jsx)(F.a,{children:Object(L.jsx)(U.a,{})}),Object(L.jsx)(P.a,{primary:"Global Timeline"})]},"global-timeline"),Object(L.jsxs)(T.a,{button:!0,selected:"profile"===e,onClick:function(){H.a.currentAuthenticatedUser().then((function(t){a.push("/"+t.username)}))},children:[Object(L.jsx)(F.a,{children:Object(L.jsx)(W.a,{})}),Object(L.jsx)(P.a,{primary:"Profile"})]},"profile"),Object(L.jsx)(T.a,{children:Object(L.jsx)(P.a,{primary:Object(L.jsx)(q.a,{error:p,helperText:y,id:"post-input",label:"Type your post!",multiline:!0,rowsMax:"8",variant:"filled",value:s,onChange:function(t){c(t.target.value),t.target.value.length>140?(j(!0),w(140-t.target.value.length)):(j(!1),w(""))},fullWidth:!0,margin:"normal"})})},"post-input-field"),Object(L.jsx)(T.a,{children:Object(L.jsx)(P.a,{primary:Object(L.jsx)(_.a,{variant:"contained",color:"primary",disabled:p,onClick:v,fullWidth:!0,children:"Post"})})},"post-button"),Object(L.jsx)(T.a,{children:Object(L.jsx)(P.a,{primary:Object(L.jsx)(_.a,{variant:"outlined",onClick:function(){H.a.signOut().then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},fullWidth:!0,children:"Logout"})})},"logout")]})]})}var Y="SUBSCRIPTION",z="INITIAL_QUERY",K="ADDITIONAL_QUERY",J=function(t,e){switch(e.type){case z:return e.posts;case K:return[].concat(Object(O.a)(t),Object(O.a)(e.posts));case Y:return[e.post].concat(Object(O.a)(t));default:return t}};function V(){var t=Object(a.useReducer)(J,[]),e=Object(f.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(null),s=Object(f.a)(o,2),c=s[0],l=s[1],u=Object(a.useState)(!0),d=Object(f.a)(u,2),p=d[0],j=d[1],b=function(){var t=Object(m.a)(h.a.mark((function t(e){var n,a,i=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,t.next=3,x.a.graphql(Object(g.b)(y,{type:"post",sortDirection:"DESC",limit:20,nextToken:n}));case 3:a=t.sent,console.log(a),r({type:e,posts:a.data.listPostsSortedByTimestamp.items}),l(a.data.listPostsSortedByTimestamp.nextToken),j(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){b(z);var t=x.a.graphql(Object(g.b)(v)).subscribe({next:function(t){console.log("allposts subscription fired");var e=t.value.data.onCreatePost;r({type:Y,post:e})}});return function(){return t.unsubscribe()}}),[]),Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsx)(Q,{activeListItem:"global-timeline"}),Object(L.jsx)(R,{isLoading:p,posts:n,getAdditionalPosts:function(){null!==c&&b(K,c)},listHeaderTitle:"Global Timeline"})]})}var Z="SUBSCRIPTION",X="INITIAL_QUERY",tt="ADDITIONAL_QUERY",et=function(t,e){switch(e.type){case X:return e.posts;case tt:return[].concat(Object(O.a)(t),Object(O.a)(e.posts));case Z:return[e.post].concat(Object(O.a)(t));default:return t}};function nt(){var t=Object(l.h)().userId,e=Object(a.useReducer)(et,[]),n=Object(f.a)(e,2),r=n[0],o=n[1],s=Object(a.useState)(null),c=Object(f.a)(s,2),u=c[0],d=c[1],p=Object(a.useState)(!0),j=Object(f.a)(p,2),b=j[0],O=j[1],y=function(){var e=Object(m.a)(h.a.mark((function e(n){var a,i,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:null,e.next=3,x.a.graphql(Object(g.b)(w,{owner:t,sortDirection:"DESC",limit:20,nextToken:a}));case 3:i=e.sent,console.log(i),o({type:n,posts:i.data.listPostsBySpecificOwner.items}),d(i.data.listPostsBySpecificOwner.nextToken),O(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){y(X);var e=x.a.graphql(Object(g.b)(v)).subscribe({next:function(e){var n=e.value.data.onCreatePost;n.owner===t&&o({type:Z,post:n})}});return function(){return e.unsubscribe()}}),[]),Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsx)(Q,{activeListItem:"profile"}),Object(L.jsx)(R,{isLoading:b,posts:r,getAdditionalPosts:function(){null!==u&&y(tt,u)},listHeaderTitle:t})]})}var at=n(10),it=n(69),rt={aws_project_region:"ap-southeast-2",aws_cognito_identity_pool_id:"ap-southeast-2:eaf9e55e-0bbe-4605-95c6-97c1b728984a",aws_cognito_region:"ap-southeast-2",aws_user_pools_id:"ap-southeast-2_DkcOV67sf",aws_user_pools_web_client_id:"2qhaje25kk4qt92sg30tlo4f4n",oauth:{},aws_appsync_graphqlEndpoint:"https://kes3mh6n7rhhpmssnxf4bi2n2y.appsync-api.ap-southeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-southeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"da2-fakeApiId123456"};at.b.configure(rt),it.b.configure(rt);var ot=Object(u.a)({palette:{type:"dark",primary:{main:"#1EA1F2",contrastText:"#fff"},background:{default:"#15202B",paper:"#15202B"},divider:"#37444C"},overrides:{MuiButton:{color:"white"}},typography:{fontFamily:["Arial"].join(",")},status:{danger:"orange"}}),st=Object(d.a)((function(t){return{root:{display:"flex",height:"100%",width:800,marginLeft:"auto",marginRight:"auto"},appBar:{marginLeft:240},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:t.mixins.toolbar,content:{flexGrow:1,backgroundColor:t.palette.background.default,padding:t.spacing(3)}}}));var ct=Object(s.a)((function(){var t=st();return Object(L.jsx)("div",{className:t.root,children:Object(L.jsxs)(p.a,{theme:ot,children:[Object(L.jsx)(j.a,{}),Object(L.jsx)(c.a,{children:Object(L.jsxs)(l.d,{children:[Object(L.jsx)(l.b,{exact:!0,path:"/",component:V}),Object(L.jsx)(l.b,{exact:!0,path:"/global-timeline",component:V}),Object(L.jsx)(l.b,{exact:!0,path:"/:userId",component:nt}),Object(L.jsx)(l.a,{path:"*",to:"/"})]})})]})})}),{signUpConfig:{hiddenDefaults:["phone_number"]}}),lt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,346)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),r(t),o(t)}))};o.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(ct,{})}),document.getElementById("root")),lt()}},[[282,1,2]]]);
//# sourceMappingURL=main.f4814f9e.chunk.js.map